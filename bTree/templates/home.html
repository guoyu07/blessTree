<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <title>主页面</title>

    <!--CSS-->
    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static "tree/css/home.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "plugin/weui/weui.min.css" %}">
    <link href="//cdn.bootcss.com/pure/0.6.0/pure-min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/grids-responsive-min.css">

    <!--js-->
    <script src="{% static "plugin/jquery/jquery.min.js" %}"></script>
    <script src="{% static "plugin/jquery/jquery.color.js" %}"></script>
    <script src="{% static "plugin/jquery/jquery.mobile-events.min.js" %}"></script>
    <script src="{% static "plugin/wechat-jssdk/weixin-1.0.0.js" %}"></script>
    <script src="{% static "tree/js/jquery.lqc.extension.js" %}"></script>
    <script src="{% static "tree/js/home.js" %}"></script>


</head>
<body class="my-body">
<!--顶部-->
<div class="menu-top">
    <div class="menu-top-con">
        <!--头像-->
        <div class="self-avatar">
{#            TODO:头像保存问题仍待解决，所以先不管 #}
            <a><img class="avatar" src="{% static "tree/image/btn/friends.png" %}" style="width: inherit"></a>
        </div>
        <!--积分条-->
        <div class="count-progress">
            <div class="progress">
                <span class="progress-bar"><span class="progress-in" style="width: 85%"></span></span>
            </div>
            <div class="count-num"><p>积分：{{ count }}</p></div>
        </div>
        <!--排行-->
        <div class="rank">
            <a><img class="rank-btn" src="{% static "tree/image/btn/rank.png" %}" style="width: inherit"></a>
        </div>
        <!--提醒-->
        <div class="tips">
            <a><img class="tips-btn" src="{% static "tree/image/btn/tips.png" %}" style="width: inherit"></a>
        </div>
    </div>
</div>

<!--内容-->
<div class="main-container">
    <div class="main-tree pure-u-19-24" style="float: left;">
        <div class="tree-area"><img src="{% static "tree/image/others/tree.png" %}"></div>
        <div class="tree-name">
            <img src="{% static "tree/image/others/name.png" %}">
            <p class="name" style="margin-top: 19%;margin-left: 23%;">{{ name }}的树</p>
        </div>
    </div>
    <div class="main-right pure-u-5-24" style="float:left">
        <ul class="right-btn" style="list-style-type: none">
            <!--朋友-->
            <li><img class="friends" src="{% static "tree/image/btn/friends.png" %}" style="width: 74%"></li>
            <!--浇水-->
            <li><img class="water-flower" src="{% static "tree/image/btn/water.png" %}" style="width: 74%"></li>
            <!--历史-->
            <li><img class="history" src="{% static "tree/image/btn/history.png" %}" style="width: 74%"></li>
            <!--心愿-->
            <li><img class="willing" src="{% static "tree/image/btn/willing.png" %}" style="width: 74%"></li>
        </ul>
    </div>
</div>

<!--脚本-->
<div class="footer"></div>
</body>
<script>
    $(function () {
        wx.config({
              debug: true,
              appId: '{{ app_id }}',
              timestamp: {{ timestamp }},
              nonceStr: '{{ noncestr }}',
              signature: '{{ signature }}',
              jsApiList: [
                'checkJsApi',
                'onMenuShareTimeline',
                'onMenuShareAppMessage',
              ]
        });
        wx.ready(function () {
            // 1 判断当前版本是否支持指定 JS 接口，支持批量判断
                wx.checkJsApi({
                    jsApiList: [
                        'getNetworkType',
                        'previewImage'
                    ],
                    success: function (res) {
                        alert(JSON.stringify(res));
                    }
                });

                wx.onMenuShareAppMessage({
                    title: '互联网之子 方倍工作室',
                    desc: '在长大的过程中，我才慢慢发现，我身边的所有事，别人跟我说的所有事，那些所谓本来如此，注定如此的事，它们其实没有非得如此，事情是可以改变的。更重要的是，有些事既然错了，那就该做出改变。',
                    link: 'http://movie.douban.com/subject/25785114/',
                    imgUrl: 'http://img3.douban.com/view/movie_poster_cover/spst/public/p2166127561.jpg',
                })
                wx.onMenuShareTimeline({
                      title: '互联网之子 方倍工作室',
                      link: 'http://movie.douban.com/subject/25785114/',
                      imgUrl: 'http://img3.douban.com/view/movie_poster_cover/spst/public/p2166127561.jpg',
                      trigger: function (res) {
                        alert('用户点击分享到朋友圈');
                      },
                      success: function (res) {
                        alert('已分享');
                      },
                      cancel: function (res) {
                        alert('已取消');
                      },
                      fail: function (res) {
                        alert(JSON.stringify(res));
                      }
                });
        })
    })
</script>
</html>